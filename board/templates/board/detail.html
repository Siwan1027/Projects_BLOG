{% extends 'base.html' %}
{% load bootstrap5 %}
{% block content %}
<h1>{{ posting.title }}</h1>
<h2>ì‘ì„±ì : <a href="{% url 'account:profile' posting.user.username %}"> {{ posting.user.username }} </a></h2>
<p>
    {{ posting.content | linebreaksbr }}
</p>

{% if request.user.is_authenticated %}
    {% if request.user.username != posting.user.username %}
        <form action="{% url 'board:like_posting' posting.pk %}" method = "POST">
            {% csrf_token %}
            {% if  is_like %}
                <button>ğŸ‘âŒ</button>
            {% else %}
                <button>ğŸ‘</button>({{posting.like_users.count}})
            {% endif %}
        </form>
    {% else %}
    <div class="d-inline">
        <a href="{% url 'board:update' posting.pk %}" class="btn btn-primary">ìˆ˜ì •</a>
        <form action="{% url 'board:delete' posting.pk %}" 
        method="POST"
        style="display: inline-block;"
        >
          {% csrf_token %}
          <button class="btn btn-primary">ì‚­ì œ</button>
        </form>
    </div>
      


    {% endif %}
{% endif %}
<div>
    <p>ëŒ“ê¸€ ì‘ì„±</p>
    <form action="{% url 'board:create_reply' posting.pk %}" method="POST">
        {% csrf_token %}
        {% bootstrap_form form %}
        <button>ì‘ì„±</button>
    </form>
</div>

<div>
    <p>ëŒ“ê¸€ ëª©ë¡</p>
    {% if replies %}
    <ul>
        {% for reply in replies %}
        <li>
            {{ reply.user }}: {{ reply.content }}

            {% if request.user == reply.user %}
            <form 
                action="{% url 'board:delete_reply' posting.pk reply.pk %}"
                method="POST"
                style="display: inline-block;"
            >
                {% csrf_token %}
                <button>ì‚­ì œ</button>
            </form>
            {% endif %}

        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>ì²« ëŒ“ê¸€ì„ ì‘ì„±í•´ ì£¼ì„¸ìš” :)</p>
    {% endif %}
</div>
{% endblock content %}
